---
layout: post
tags: fc reproduction vrc2 vrc4
date: 2017-10-02 11:51
thumbnail: /blog/assets/images/posts/20171002/00.jpg
short: VRC2和VRC4卡带的改造
title: VRC2和VRC4卡带的改造
issue_id: 10
categories: [FC]
published: true
---

Konami在FC时代就已经如日中天，优秀作品层出不穷，更厉害的是各种类型都很擅长，也因此留下了众多的传世神作。但是在当年盗版黄卡横行的而正版难得一见的情形下除了经典的老四强之外，很多经典的Konami我们都没机会玩到。

<!--more-->

原因就是Konami在其卡带上使用了自己研发的VRC系列芯片来提升游戏的画面和音效。比如，日版的魂斗罗是有剧情过场和关卡进度画面的，并且第一关的背景树叶会动，第六关会下雪等等。由于任天堂当时的政策，美版NES游戏都是任天堂的公版卡带设计，只能使用任天堂官方的MMC芯片，所以很多使用了特殊芯片的大作要么没有美版要么就在效果上做了阉割。当年老四强黄卡里采用的都是美版，就是因为日版的VRC芯片无法仿制，而美版UNROM则用的都是通用芯片没有盗版的难度，这也就是为什么玩黄卡长大的孩子们从来没见过树叶会动的魂斗罗的原因。

日版魂斗罗是Mapper23，基于VRC-2芯片。不过网上早就有了被hack成了mmc3的日版英化版，保留了所有vrc2下的特效（参考这个链接：[https://www.romhacking.net/translations/1551/](https://www.romhacking.net/translations/1551/)）。

这次我要制作的是同样是Mapper23和VRC2芯片的柯拉米世界1，以及Mapper21和VRC4芯片的柯拉米世界2。

![image](/blog/assets/images/posts/20171002/01.jpg)

Konami的卡带有大卡和小卡两种封装，上面这两个游戏都是密码记录进度，所以都是小卡。但是二手市场上和这两个游戏同样芯片的小卡封装要么很少要么很贵，综合下来最合适的就是下面这两张大卡封装的五右卫门外传1和2。。

![image](/blog/assets/images/posts/20171002/02.jpg)

Konami的大卡封装非常奇葩，一共有5个卡扣，顶部有一个，侧面上下分别有两组，如下所示：

![image](/blog/assets/images/posts/20171002/03.jpg)

这就给拆卸带来了很大难度，特别是靠上方的一组卡扣，用通常的螺丝刀撬的办法基本是百分百会断。于是我开始琢磨无损拆解的方法，然后就在youtube上找到了下面这个视频：

[![open_cart](/blog/assets/images/posts/20171002/04.jpg)](https://www.youtube.com/watch?v=LgCiAOmgeFc "open_cart")

在x宝里搜索“木工夹”，按照视频里的式样选一个类似的。

![image](/blog/assets/images/posts/20171002/05.jpg)

有了这个工具，按照视频里的方法，夹住卡带上盖靠近卡扣的位置，稍稍用力挤压使外壳弯曲，再用螺丝刀轻轻一撬，卡扣就松脱了。这样就能确保5个卡扣的无损拆解。

VRC2和VRC4几乎是完全一样的芯片，区别只是VRC4比VRC2多了一个中断。所以NESdev的wiki中把这两个芯片综合在一个页面里（[http://wiki.nesdev.com/w/index.php/VRC2_and_VRC4](http://wiki.nesdev.com/w/index.php/VRC2_and_VRC4)）。

| Game                              | Variant | iNES mapper  |
|:----------------------------------|:--------|:-------------|
|Ganbare Pennant Race   			|VRC2a    |22            |
|TwinBee 3             			 	|VRC2a    |22            |
|Wai Wai World          			|VRC2b    |23            |
|Ganbare Goemon Gaiden  			|VRC2c    |25            |
|Wai Wai World 2        			|VRC4a    |21            |
|Bio Miracle Bokutte Upa			|VRC4b    |25            |
|Gradius 2 (J)          			|VRC4b    |25            |
|Ganbare Goemon Gaiden 2			|VRC4c    |21            |
|Teenage Mutant Ninja Turtles (J)	|VRC4d    |25            |
|Boku Dracula-kun					|VRC4e    |23            |
|Tiny Toon Adventures (J)			|VRC4e    |23            |

如上面表格中列出的，一个芯片会对应一个以上的mapper编号，无论VRC2还是VRC4只要变换一下针脚的接法就成了另一种mapper。所以，接下来的改造过程中不仅需要处理flash芯片，还需要对VRC芯片做跳线。

改造过程还有如下文章可以参考：<br/>
[http://unagi.sourceforge.jp/cgi-bin/hiki/hiki.cgi?VRC4](http://unagi.sourceforge.jp/cgi-bin/hiki/hiki.cgi?VRC4)<br/>
[http://bakutendo.blog87.fc2.com/blog-entry-198.html](http://bakutendo.blog87.fc2.com/blog-entry-198.html)<br/>
[http://blog.naver.com/PostView.nhn?blogId=xsnake&logNo=220266981002&beginTime=0&jumpingVid=&from=search&redirect=Log&widgetTypeCall=true](http://blog.naver.com/PostView.nhn?blogId=xsnake&logNo=220266981002&beginTime=0&jumpingVid=&from=search&redirect=Log&widgetTypeCall=true)

## 改造VRC2

![image](/blog/assets/images/posts/20171002/06.jpg)



以下是改造手册，用UltraEdit打开可以全屏不用翻页：[VRC2&4.txt](https://github.com/maximaas/Famicom-DIY/blob/master/repro/VRC2&4.txt)

卡带的图片贴纸文件：<br/>
[https://github.com/maximaas/Famicom-DIY/tree/master/sticker/wai wai world](https://github.com/maximaas/Famicom-DIY/tree/master/sticker/wai wai world)<br/>
[https://github.com/maximaas/Famicom-DIY/tree/master/sticker/wai wai world 2](https://github.com/maximaas/Famicom-DIY/tree/master/sticker/wai wai world 2)